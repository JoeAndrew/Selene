#!./Selene 
-- Input device's event example

local evt

function rcv_event()
	print('event received')
	local t, tp, c, v = evt:read()
	print( os.date('%c', t), tp, SelEvent.TypeName(tp), c, SelEvent.KeyName(c), v)
end

evt = SelEvent.create('/dev/input/event1', rcv_event)

while true do
	local rt = table.pack( Selene.WaitFor(evt) )
	for _,ret in ipairs(rt) do
		if type(ret) == 'function' then
			ret()
		end
	end
end
